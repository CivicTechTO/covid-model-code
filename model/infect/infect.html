<!doctype html>

<html lang="en">
<head>
  <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
  <meta content="utf-8" http-equiv="encoding">

  <title>Infect</title>
  <meta name="description" content="infect">

  <link rel="stylesheet" href="../css/styles.css">
  <link rel="stylesheet" href="../css/generated.css">

</head>

<body>
  <div id="images">
    <img id="covid-uninfected" src="../images/covid-uninfected.png">
    <img id="covid-infected" src="../images/covid-infected.png">
    <img id="covid-recovered" src="../images/covid-recovered.png">
    <img id="cross" src="../images/cross.png">
    <img id="crescent" src="../images/crescent.png">
    <img id="star" src="../images/star.png">
    <img id="bigcross" src="../images/bigcross.png">
    <img id="bigcrescent" src="../images/bigcrescent.png">
    <img id="bigstar" src="../images/bigstar.png">
  </div>

  <div id="page-title">
    <a href="index.html"><h1>Animated Covid Model/Game</h1></a>
  </div>
  
  <div id="infect-container">
    
    <div id="animation-block">
      <div class="info">Click for description. 
        <div class="info-img" onclick="showTooltip('person-tooltip', 0, 0);">
          <img src="../images/info.svg">
        </div>
      </div>

      <div id="display">
        <canvas id="canvas" width=1000 height=505></canvas>      
      </div>
    </div>

    <div id="static-block">
      <div id="info-panel">
        <div id="day-block">Day number: <span id="day">1</span> <span id="limit"></span> &nbsp; <span id="name">Sunday</span></div>
        <div id="time-block">Time: <span id="hour">08</span>:<span id="minutes">00</span> &nbsp;</div>
        <div id="score-block">Political capital available: <span id="score">50,000,000</span></div>
        <div class="info-img" onclick="showTooltip('info-tooltip', 0, 1);">
          <img src="../images/info.svg">
        </div>
      </div>
 
     <div>
         <div id="controls">
          <fieldset id="all-controls">
            <h2>General Controls</h2>

            <div>
              <button type="button" id="start-game" class="cold-colour" onclick="startGame();">Start game</button>

              <button type="button" id="run" class="hot-colour" onclick="toggleRun();">Pause</button>
              
              <div class="info-img" onclick="showTooltip('general-tooltip', 0, 2);">
                <img src="../images/info.svg">
              </div>
              <div id="speed-group" class="controls-contents">
                <div class="control-title">Speed</div>
                <div class="info-img" onclick="showTooltip('speed-tooltip', 0, 3);">
                  <img src="../images/info.svg">
                </div>
                <div id="speed" class="control-value">Slow</div>
                <div class="control-buttons">
                  <button id="slow-speed" type="button" onclick="setSpeed(state.activeConfig.stepsPerFrame.slow);">Slow</button>
                  <button id="medium-speed" type="button" onclick="setSpeed(state.activeConfig.stepsPerFrame.medium);">Medium</button>
                  <button id="fast-speed" type="button" onclick="setSpeed(state.activeConfig.stepsPerFrame.fast);">Fast</button>
                </div>
              </div>
            </div>

            <fieldset id="game-controls" disabled="true">

              <h2>Game Controls</h2>

              <div class="info-img" onclick="showTooltip('game-tooltip', 0, 4);">
                <img src="../images/info.svg">
              </div>

              <div class="controls-contents">
             
                <div class="control-title">Masks</div>
                <div class="info-img" onclick="showTooltip('masks-tooltip', 0, 5);">
                  <img src="../images/info.svg">
                </div>
                <div id="masks" class="control-value">None</div>
                <div class="control-buttons">
                  <button id="no-masks" type="button" onclick="setMasks(state.activeConfig.masks.specs.none);">None</button>
                  <button id="encourage-masks" type="button" onclick="setMasks(state.activeConfig.masks.specs.encourage);">Encourage</button>
                  <button id="require-masks" type="button" onclick="setMasks(state.activeConfig.masks.specs.require);">Require</button>
                  <button id="enforce-masks" type="button" onclick="setMasks(state.activeConfig.masks.specs.enforce);">Enforce</button>
                </div>
            
                <div class="control-title">Tests</div>
                <div class="info-img" onclick="showTooltip('tests-tooltip', 0, 6);">
                  <img src="../images/info.svg">
                </div>
                <div id="tests" class="control-value">None</div>
                <div class="control-buttons">
                  <button id="no-tests" type="button" onclick="setTests(state.activeConfig.tests.none);">None</button>
                  <button id="light-tests" type="button" onclick="setTests(state.activeConfig.tests.light);">Light</button>
                  <button id="heavy-tests" type="button" onclick="setTests(state.activeConfig.tests.heavy);">Heavy</button>
                </div>

                <div class="control-title">Tracing</div>
                <div class="info-img" onclick="showTooltip('trace-tooltip', 0, 7);">
                  <img src="../images/info.svg">
                </div>
                <div id="trace" class="control-value">None</div>
                <div class="control-buttons">
                  <fieldset id="depends-on-tests" disabled="true">
                    <button id="no-trace" type="button" onclick="setTrace(state.activeConfig.trace.none);">None</button>
                    <button id="forward-trace" type="button" onclick="setTrace(state.activeConfig.trace.forward);">Forward</button>
                    <button id="backward-trace" type="button" onclick="setTrace(state.activeConfig.trace.backward);">Backward</button>
                  </fieldset>
                </div>

                <div class="control-title">Isolate</div>
                <div class="info-img" onclick="showTooltip('isolate-tooltip', 0, 8);">
                  <img src="../images/info.svg">
                </div>
                <div id="isolate" class="control-value">None</div>
                <div class="control-buttons">
                  <button id="no-isolate" type="button" onclick="setIsolate(state.activeConfig.isolate.none);">None</button>
                  <button id="encourage-isolate" type="button" onclick="setIsolate(state.activeConfig.isolate.encourage);">Encourage</button>
                  <button id="require-isolate" type="button" onclick="setIsolate(state.activeConfig.isolate.require);">Require</button>
                  <button id="enforce-isolate" type="button" onclick="setIsolate(state.activeConfig.isolate.enforce);">Enforce</button>
                </div>
                <div>&nbsp</div>
              </div>

                <div id="toggle-description">
                  The following controls shut down or open up a category of rooms.
                </div>

                <div class="toggle-contents">
                  <div class="toggle-room">
                    <div class="toggle-title church-colour">Worship</div>
                    <div class="info-img" onclick="showTooltip('worship-tooltip', 1, 0);">
                      <img src="../images/info.svg">
                    </div>
                    <div class="boolean-button">
                      <button class="boolean boolean-false" id="worship-false" onclick="state.roomButtons[C.ROOMTYPE.WORSHIP].falseAction();">Close</button>
                      <button class="boolean boolean-toggle" id="worship-toggle" onclick="state.roomButtons[C.ROOMTYPE.WORSHIP].toggleAction();">
                        <img id="worship-image" src="../images/left.svg" />
                      </button> 
                      <button class="boolean boolean-true" id="worship-true" onclick="state.roomButtons[C.ROOMTYPE.WORSHIP].trueAction();">Open</button>
                    </div>
                  </div>

                  <div class="toggle-room">
                    <div class="toggle-title restaurant-colour">Restaurants</div>
                    <div class="info-img" onclick="showTooltip('restaurants-tooltip', 1, 1);">
                      <img src="../images/info.svg">
                    </div>
                    <div class="boolean-button">
                      <button class="boolean boolean-false" id="restaurants-false" onclick="state.roomButtons[C.ROOMTYPE.RESTAURANTS].falseAction();">
                        Close
                      </button>
                      <button class="boolean boolean-toggle" id="restaurants-toggle" onclick="state.roomButtons[C.ROOMTYPE.RESTAURANTS].toggleAction();">
                        <img id="restaurants-image" src="../images/left.svg" />
                      </button> 
                      <button class="boolean boolean-true" id="restaurants-true" onclick="state.roomButtons[C.ROOMTYPE.RESTAURANTS].trueAction();">Open</button>
                    </div>
                  </div>

                  <div class="toggle-room">
                    <div class="toggle-title bar-colour">Bars</div>
                    <div class="info-img" onclick="showTooltip('bars-tooltip', 1, 2);">
                      <img src="../images/info.svg">
                    </div>
                    <div class="boolean-button">
                      <button class="boolean boolean-false" id="bars-false" onclick="state.roomButtons[C.ROOMTYPE.BARS].falseAction();">Close</button>
                      <button class="boolean boolean-toggle" id="bars-toggle" onclick="state.roomButtons[C.ROOMTYPE.BARS].toggleAction();">
                        <img id="bars-image" src="../images/left.svg" />
                      </button> 
                      <button class="boolean boolean-true" id="bars-true" onclick="state.roomButtons[C.ROOMTYPE.BARS].trueAction();">Open</button>
                    </div>
                  </div>

                  <div class="toggle-room">
                    <div class="toggle-title club-colour">Clubs</div>
                    <div class="info-img" onclick="showTooltip('clubs-tooltip', 1, 3);">
                      <img src="../images/info.svg">
                    </div>
                    <div class="boolean-button">
                      <button class="boolean boolean-false" id="clubs-false" onclick="state.roomButtons[C.ROOMTYPE.CLUBS].falseAction();">Close</button>
                      <button class="boolean boolean-toggle" id="clubs-toggle" onclick="state.roomButtons[C.ROOMTYPE.CLUBS].toggleAction();">
                        <img id="clubs-image" src="../images/left.svg" />
                      </button> 
                      <button class="boolean boolean-true" id="clubs-true" onclick="state.roomButtons[C.ROOMTYPE.CLUBS].trueAction();">Open</button>
                    </div>
                  </div>

                  <div class="toggle-room">
                    <div class="toggle-title school-colour">Schools</div>
                    <div class="info-img" onclick="showTooltip('schools-tooltip', 1, 4);">
                      <img src="../images/info.svg">
                    </div>
                    <div class="boolean-button">
                      <button class="boolean boolean-false" id="schools-false" onclick="state.roomButtons[C.ROOMTYPE.SCHOOLS].falseAction();">Close</button>
                      <button class="boolean boolean-toggle" id="schools-toggle" onclick="state.roomButtons[C.ROOMTYPE.SCHOOLS].toggleAction();">
                        <img id="schools-image" src="../images/left.svg" />
                      </button> 
                      <button class="boolean boolean-true" id="schools-true" onclick="state.roomButtons[C.ROOMTYPE.SCHOOLS].trueAction();">Open</button>
                    </div>
                  </div>

                  <div class="toggle-room">
                    <div class="toggle-title office-colour">Offices</div>
                    <div class="info-img" onclick="showTooltip('offices-tooltip', 1, 5);">
                      <img src="../images/info.svg">
                    </div>
                    <div class="boolean-button">
                      <button class="boolean boolean-false" id="offices-false" onclick="state.roomButtons[C.ROOMTYPE.OFFICES].falseAction();">Close</button>
                      <button class="boolean boolean-toggle" id="offices-toggle" onclick="state.roomButtons[C.ROOMTYPE.OFFICES].toggleAction();">
                        <img id="offices-image" src="../images/left.svg" />
                      </button> 
                      <button class="boolean boolean-true" id="offices-true" onclick="state.roomButtons[C.ROOMTYPE.OFFICES].trueAction();">Open</button>
                    </div>
                  </div>

                  <div class="toggle-room">
                    <div class="toggle-title meat-colour">Meat&nbsp;packing</div>
                    <div class="info-img" onclick="showTooltip('meat-tooltip', 1, 6);">
                      <img src="../images/info.svg">
                    </div>
                    <div class="boolean-button">
                      <button class="boolean boolean-false" id="meat-false" onclick="state.roomButtons[C.ROOMTYPE.MEAT].falseAction();">Close</button>
                      <button class="boolean boolean-toggle" id="meat-toggle" onclick="state.roomButtons[C.ROOMTYPE.MEAT].toggleAction();">
                        <img id="meat-image" src="../images/left.svg" />
                      </button> 
                      <button class="boolean boolean-true" id="meat-true" onclick="state.roomButtons[C.ROOMTYPE.MEAT].trueAction();">Open</button>
                    </div>
                  </div>

                  <div class="toggle-room">
                    <div class="toggle-title outside-colour">Parks</div>
                    <div class="info-img" onclick="showTooltip('outside-tooltip', 1, 7);">
                      <img src="../images/info.svg">
                    </div>
                    <div class="boolean-button">
                      <button class="boolean boolean-false" id="outside-false" onclick="state.roomButtons[C.ROOMTYPE.OUTSIDE].falseAction();">Close</button>
                      <button class="boolean boolean-toggle" id="outside-toggle" onclick="state.roomButtons[C.ROOMTYPE.OUTSIDE].toggleAction();">
                        <img id="outside-image" src="../images/left.svg" />
                      </button> 
                      <button class="boolean boolean-true" id="outside-true" onclick="state.roomButtons[C.ROOMTYPE.OUTSIDE].trueAction();">Open</button>
                    </div>
                </div>

                  <div class="toggle-room">
                  <div class="toggle-title house-colour">House&nbsp;parties</div>
                    <div class="info-img" onclick="showTooltip('house-tooltip', 1, 8);">
                      <img src="../images/info.svg">
                    </div>
                    <div class="boolean-button">
                      <button class="boolean boolean-false" id="parties-false" onclick="state.roomButtons[C.ROOMTYPE.PARTIES].falseAction();">Close</button>
                      <button class="boolean boolean-toggle" id="parties-toggle" onclick="state.roomButtons[C.ROOMTYPE.PARTIES].toggleAction();">
                        <img id="parties-image" src="../images/left.svg" />
                      </button> 
                      <button class="boolean boolean-true" id="parties-true" onclick="state.roomButtons[C.ROOMTYPE.PARTIES].trueAction();">Open</button>
                    </div>
                </div>
            </fieldset>
          </fieldset>

          <div id="other-group">
            <div class="other-title">Other rooms</div>
            <div id="other-names">
              <div class="other-title bunkhouse-colour">Bunkhouse</div>
                <div class="info-img" onclick="showTooltip('bunkhouse-tooltip', 1, 9);">
                  <img src="../images/info.svg">
                </div>
              <div class="other-title isolation-colour">Isolation</div>
                <div class="info-img" onclick="showTooltip('isolation-tooltip', 1, 10);">
                  <img src="../images/info.svg">
                </div>
              <div class="other-title icu-colour">ICU</div>
                <div class="info-img" onclick="showTooltip('icu-tooltip', 1, 11);">
                  <img src="../images/info.svg">
                </div>
              <div class="other-title ward-colour">Ward</div>
                <div class="info-img" onclick="showTooltip('ward-tooltip', 1, 12);">
                  <img src="../images/info.svg">
                </div>
              <div class="other-title hallway-colour">Waiting</div>
                <div class="info-img" onclick="showTooltip('waiting-tooltip', 1, 13);">
                  <img src="../images/info.svg">
                </div>
              <div class="other-title cemetary-colour">Cemetary</div>
                <div class="info-img" onclick="showTooltip('cemetary-tooltip', 1, 14);">
                  <img src="../images/info.svg">
                </div>
            </div>
          </div>
        </div>

        <div id="records">
          <table>
            <tr> 
              <th class="row-label">Condition</th> 
              <th>Current</th> 
              <th>Maximum</th> 
              <th>Total</th> 
            </tr>
            
            <tr class="game-hide"> 
              <td class="row-label">Never&nbsp;infected </td> 
              <td id="currentWell">0</td> 
              <td id="maxWell">0</td> 
              <td id="totalWell">0</td> 
            </tr>
            
            <tr class="game-hide"> 
              <td class="row-label">Infected </td> 
              <td id="currentInfected">0</td> 
              <td id="maxInfected">0</td> 
              <td id="totalInfected">0</td> 
            </tr>
            <tr class="game-hide"> 
              <td class="row-label">Incubating </td> 
              <td id="currentIncubating">0</td> 
              <td id="maxIncubating">0</td> 
              <td id="totalIncubating">0</td> 
            </tr>
            
            <tr class="game-hide"> 
              <td class="row-label">Infectious </td> 
              <td id="currentInfectious">0</td> 
              <td id="maxInfectious">0</td> 
              <td id="totalInfectious">0</td> 
            </tr>
            
            <tr class="game-show"> 
              <td class="row-label">Tests</td> 
              <td id="currentTests">0</td> 
              <td id="maxTests">0</td> 
              <td id="totalTests">0</td> 
            </tr>
            
            <tr class="game-show"> 
              <td class="row-label">Positive</td> 
              <td id="currentPositive">0</td> 
              <td id="maxPositive">0</td> 
              <td id="totalPositive">0</td> 
            </tr>
            
            <tr class="game-show"> 
              <td class="row-label">Isolated</td> 
              <td id="currentIsolated">0</td> 
              <td id="maxIsolated">0</td> 
              <td id="totalIsolated">0</td> 
            </tr>
            
            <tr class="game-show"> 
              <td class="row-label">Isolation&nbsp;rooms</td> 
              <td id="currentIsolationRoom">0</td> 
              <td id="maxIsolationRoom">0</td> 
              <td id="totalIsolationRoom">0</td> 
            </tr>
            
            <tr class="game-show"> 
              <td class="row-label">Isolation&nbsp;home</td> 
              <td id="currentIsolationHome">0</td> 
              <td id="maxIsolationHome">0</td> 
              <td id="totalIsolationHome">0</td> 
            </tr>
            
            <tr class="game-show"> 
              <td class="row-label">Isolation&nbsp;overflow</td> 
              <td id="currentIsolationOverflow">0</td> 
              <td id="maxIsolationOverflow">0</td> 
              <td id="totalIsolationOverflow">0</td> 
            </tr>
            
            <tr> 
              <td class="row-label">Symptomatic</td> 
              <td id="currentSymptomatic">0</td> 
              <td id="maxSymptomatic">0</td> 
              <td id="totalSymptomatic">0</td> 
            </tr>
            
            <tr> 
              <td class="row-label">Recovered</td> 
              <td id="currentRecovered">0</td> 
              <td id="maxRecovered">0</td> 
              <td id="totalRecovered">0</td> 
            </tr>
            
            <tr> 
              <td class="row-label">Sick&nbsp;at&nbsp;home </td> 
              <td id="currentHomeSick">0</td> 
              <td id="maxHomeSick">0</td> 
              <td id="totalHomeSick">0</td> 
            </tr>
            
            <tr> 
              <td class="row-label">Needs&nbsp;hospital </td> 
              <td id="currentWardSick">0</td> 
              <td id="maxWardSick">0</td> 
              <td id="totalWardSick">0</td> 
            </tr>
            
            <tr> 
              <td class="row-label">Waiting&nbsp;for&nbsp;bed</td> 
              <td id="currentHallway">0</td> 
              <td id="maxHallway">0</td> 
              <td id="totalHallway">0</td> 
            </tr>
            
            <tr> 
              <td class="row-label">Needs&nbsp;ICU </td> 
              <td id="currentICUSick">0</td> 
              <td id="maxICUSick">0</td> 
              <td id="totalICUSick">0</td> 
            </tr>
            
            <tr> 
              <td class="row-label">Dead</td> 
              <td id="currentDead">0</td> 
              <td id="maxDead">0</td> 
              <td id="totalDead">0</td> 
            </tr>
          </table>  
        </div>
      </div>
      </div>

      <div id="charts">
        <div id="chartContainer" class="chartx">
          <div><!-- h4>Overview</h4 --><canvas id='overview'></canvas> </div>
          <div><!-- h4>Recent</h4 --><canvas id='moving'></canvas> </div>
        </div>
    </div>

  <div id="announce-outer">
    <div id="announce-lose" class="announce">
      <div class="announce-text">GAME RESULTS</div>
      <div class="announce-text">You have lost.</div>
      <div id="score-text-lose" class="announce-text">You survived 45 days.</div>
      <div class="button-group">
        <button type="button" class="announce-button" onclick="quit();">Quit</button>
        <button type="button" class="announce-button" onclick="play();">Play again</button>
      </div>
    </div>

    <div id="announce-win" class="announce">
      <div class="announce-text">GAME RESULTS</div>
      <div class="announce-text">You have survived.</div>
      <div id="score-text-win" class="announce-text">You have 10,000,000 political points remaining.</div>
      <div class="button-group">
        <button type="button" class="announce-button" onclick="quit();">Quit</button>
        <button type="button" class="announce-button" onclick="play();">Play&nbsp;again</button>
      </div>
    </div>    
  </div>

  <div id="person-tooltip" class="tooltip" onclick="restack(this);">
    <h3>Illustration</h3>
    <p>
      The model starts with a running illustration of what happens if there are no interventions.  
      More details of what is going on are displayed here than during the game.
      The initial conditions are carefully set up to guarantee a virulent outbreak.
    </p>

    <h3>Room Effects</h3>
    <p>
      People behave differently in different kinds of rooms.
    </p>
    <p>
      There are some characteristics of rooms that influence disease transmission.  
      Notably the ventilation level and loudness (people talking and singing).
      The blue bar on the left of the room indicates the ventilation level (higher is worse).
      The red bar on the right indicates the loudness level.
    </p>
    
    <h3>Displaying People</h3>
    <p>
      People are displayed as faces.  The colour and whether or not they are smiling indicate their status.
    </p>
    <div>
      During the illustration:
      <div class="face-list">
        <div class="face-name">Never been infectious</div> <div class="face"><img src="../images/covid-uninfected.png"></div>
        <div class="face-name">Currently infectious </div> <div class="face"><img src="../images/covid-infected.png"></div>
        <div class="face-name">No longer infectious </div> <div class="face"><img src="../images/covid-recovered.png"></div>
      </div>
    </div>
    <div>
      During the game:
      <div class="face-list">
        <div class="face-name">Never been symptomatic</div> <div class="face"><img src="../images/covid-uninfected.png"></div>
        <div class="face-name">Currently symptomatic</div> <div class="face"><img src="../images/covid-infected.png"></div>
        <div class="face-name">No longer symptomatic</div> <div class="face"><img src="../images/covid-recovered.png"></div>
      </div>
    </div>

    <h3>Other</h3>
    <p>
      Clicking on the animation shows information about the room you clicked on.
    </p>

    <div class="tooltip-buttons">
      <button onclick="hideTooltips();">Close&nbsp;all</button>
      <button onclick="hide('person-tooltip');">Close</button>
    </div>
  </div>

  <div id="info-tooltip" class="tooltip" onclick="restack(this);">
    <h3>Time and Score Information</h3>
    <p>
      Time includes day number, day of week, and time of day.  Peoples behaviour depends on day of week and time of day.  
      The game lasts a limited number of days.
    </p>
    <p>
      For the game, you start with a fixed number of political points.  Disease progression will cost points, as will interventions.  The object is to spend the fewest points possible to get to the game day limit.  If the available points drop to zero the game stops and you lose.
    </p>

    <div class="tooltip-buttons">
      <button onclick="hideTooltips();">Close&nbsp;all</button>
      <button onclick="hide('info-tooltip');">Close</button>
    </div>
  </div>

  <div id="general-tooltip" class="tooltip" onclick="restack(this);">
    <h3>General Controls</h3>
    <p>
      The Start game button starts the game running, if you want to go back to the illustration you must reload the page.
      The game simulation is slightly different from the illustration because the model step size is different.
    </p>
    <p>
      The Pause/Run button stops and starts the animation.  Game controls will still work when the animation is paused.  
    </p>

    <div class="tooltip-buttons">
      <button onclick="hideTooltips();">Close&nbsp;all</button>
      <button onclick="hide('general-tooltip');">Close</button>
    </div>
  </div>

  <div id="speed-tooltip" class="tooltip" onclick="restack(this);">
    <h3>Speed</h3>
    <p>
      The speed selection changes how many model steps happen between screen refreshes.
    </p>

    <div class="tooltip-buttons">
      <button onclick="hideTooltips();">Close&nbsp;all</button>
      <button onclick="hide('speed-tooltip');">Close</button>
    </div>
  </div>

  <div id="game-tooltip" class="tooltip" onclick="restack(this);">
    <h3>Game Controls</h3>
    <p>
      Game interventions wait to take effect at 8AM.
    </p>

    <div class="tooltip-buttons">
      <button onclick="hideTooltips();">Close&nbsp;all</button>
      <button onclick="hide('game-tooltip');">Close</button>
    </div>
  </div>

  <div id="masks-tooltip" class="tooltip" onclick="restack(this);">
    <h3>Masks</h3>
    <p>
      Higher levels of mask enforcement causes more people to wear masks.
    </p>

    <div class="tooltip-buttons">
      <button onclick="hideTooltips();">Close&nbsp;all</button>
      <button onclick="hide('masks-tooltip');">Close</button>
    </div>
  </div>

  <div id="tests-tooltip" class="tooltip" onclick="restack(this);">
    <h3>Tests</h3>
    <p>
      Selecting Tests implements random testing. More people get tested if Heavy testing is selected. People who test positive go home (or isolate).
    </p>

    <div class="tooltip-buttons">
      <button onclick="hideTooltips();">Close&nbsp;all</button>
      <button onclick="hide('tests-tooltip');">Close</button>
    </div>
  </div>

  <div id="trace-tooltip" class="tooltip" onclick="restack(this);">
    <h3>Trace</h3>
    <p>
      The trace issue may be the most significant part of this animation.  
      The assumption in the underlying model is that most people infected with Covid are not infectious at all, 
      while a small minority is incredibly infectious.  
      Whether this is actually true or not is expected to make a large difference in the effectiveness of tracing choices.
    </p>

    <p>
      Tracing means to look at travel patterns of an infected person and test people they have been in contact with.
    </p>
    <p>
      Forward tracing means to try to find people that this case has infected by looking at recent travel patterns.
    </p>

    <p>
      Backward tracing means to try to find the person that infected this person by looking at less recent travel patterns,
      and then forward trace from the people found to be infected there.
    </p>

    <p>
      Tracing is only available if testing is active.
    </p>

    <div class="tooltip-buttons">
      <button onclick="hideTooltips();">Close&nbsp;all</button>
      <button onclick="hide('trace-tooltip');">Close</button>
    </div>
  </div>

  <div id="isolate-tooltip" class="tooltip" onclick="restack(this);">
    <h3>Isolate</h3>
    <p>
      Turning Isolate on causes people who are sick at home (or test positive) to go to isolation rooms 
      if they are not the sole occupant of their dwelling.
    </p>

    <div class="tooltip-buttons">
      <button onclick="hideTooltips();">Close&nbsp;all</button>
      <button onclick="hide('isolate-tooltip');">Close</button>
    </div>
  </div>

  <div id="worship-tooltip" class="tooltip" onclick="restack(this);">
    <h3 class="church-colour">Worship</h3>
    <p>
      People worshipping alternate between sitting in rows and milling about.  
      Along with relatively low ventilation and being very loud (singing) this makes them significant spreading sites.
    </p>

    <div class="tooltip-buttons">
      <button onclick="hideTooltips();">Close&nbsp;all</button>
      <button onclick="hide('worship-tooltip');">Close</button>
    </div>
  </div>

  <div id="restaurants-tooltip" class="tooltip" onclick="restack(this);">
    <h3 class="restaurant-colour">Restaurants</h3>
    <p>
      People in restaurants are grouped.  New (random) arrivals are seated at the first table with an empty chair, 
      when they (randomly) decide to leave, the whole table leaves together.
    </p>

    <div class="tooltip-buttons">
      <button onclick="hideTooltips();">Close&nbsp;all</button>
      <button onclick="hide('restaurants-tooltip');">Close</button>
    </div>
  </div>

  <div id="bars-tooltip" class="tooltip" onclick="restack(this);">
    <h3 class="bar-colour">Bars</h3>
    <p>
      People are seated in rows in the bars.
      They arrive and leave (randomly) on their own.
    </p>

    <div class="tooltip-buttons">
      <button onclick="hideTooltips();">Close&nbsp;all</button>
      <button onclick="hide('bars-tooltip');">Close</button>
    </div>
  </div>

  <div id="clubs-tooltip" class="tooltip" onclick="restack(this);">
    <h3 class="club-colour">Clubs</h3>
    <p>
      In clubs people are rapidly moving around inside.  Clubs are loud because people are breathing heavily.
      People individually randomly arrive and leave.
    </p>

    <div class="tooltip-buttons">
      <button onclick="hideTooltips();">Close&nbsp;all</button>
      <button onclick="hide('clubs-tooltip');">Close</button>
    </div>
  </div>

  <div id="schools-tooltip" class="tooltip" onclick="restack(this);">
    <h3 class="school-colour">Schools</h3>
    <p>
      People are allocated to schools, they go there from 8AM to 4PM Monday to Friday.
      In schools people mostly sit in rows.  Sometimes people move to a random location in the room and then return.
    </p>

    <div class="tooltip-buttons">
      <button onclick="hideTooltips();">Close&nbsp;all</button>
      <button onclick="hide('schools-tooltip');">Close</button>
    </div>
  </div>

  <div id="offices-tooltip" class="tooltip" onclick="restack(this);">
    <h3 class="office-colour">Offices</h3>
    <p>
      People are allocated to offices, they go there from 8AM to 4PM Monday to Friday.
      In offices people mostly sit in rows.  Sometimes people move to a random location in the room and then return.
    </p>

    <div class="tooltip-buttons">
      <button onclick="hideTooltips();">Close&nbsp;all</button>
      <button onclick="hide('offices-tooltip');">Close</button>
    </div>
  </div>

  <div id="meat-tooltip" class="tooltip" onclick="restack(this);">
    <h3 class="meat-colour">Meat packing</h3>
    <p>
      People are allocated to meat packing plants, they go there from 8AM to 4PM Monday to Friday.
      In packing plants people mostly sit in rows.  Sometimes people move to a random location in the room and then return.
    </p>

    <div class="tooltip-buttons">
      <button onclick="hideTooltips();">Close&nbsp;all</button>
      <button onclick="hide('meat-tooltip');">Close</button>
    </div>
  </div>

  <div id="outside-tooltip" class="tooltip" onclick="restack(this);">
    <h3 class="outside-colour">Parks</h3>
    <p>
      Parks are extemely well ventilated and not loud.  People randomly go to parks on evenings and weekends.
    </p>

    <div class="tooltip-buttons">
      <button onclick="hideTooltips();">Close&nbsp;all</button>
      <button onclick="hide('outside-tooltip');">Close</button>
    </div>
  </div>

  <div id="house-tooltip" class="tooltip" onclick="restack(this);">
    <h3 class="house-colour">Houses</h3>
    <p>
      Houses and bunkhouses are collectively known as dwellings.
    </p>
    <p>
      People are allocated to dwellings.  They go there every night (if not isolating or in hospital).
      They also go there if they are too sick to work.  
      Some people are allocated to their house during the workday.
    </p>

    <p>
      Some people randomly visit other dwellings on evenings and weekends.  
      This can be preventing by closing house parties.
    </p>

    <div class="tooltip-buttons">
      <button onclick="hideTooltips();">Close&nbsp;all</button>
      <button onclick="hide('house-tooltip');">Close</button>
    </div>
  </div>

  <div id="bunkhouse-tooltip" class="tooltip" onclick="restack(this);">
    <h3 class="bunkhouse-colour">Bunkhouses</h3>
    <p>
      Bunkhouses are large dwellings with more people in them.  No one is allocated to them during the workday.
    </p>

    <div class="tooltip-buttons">
      <button onclick="hideTooltips();">Close&nbsp;all</button>
      <button onclick="hide('bunkhouse-tooltip');">Close</button>
    </div>
  </div>

  <div id="isolation-tooltip" class="tooltip" onclick="restack(this);">
    <h3 class="isolation-colour">Isolation Rooms</h3>
    <p>
      Isolation rooms are where people with room mates go it they are sick and isolation is being enforced.
    </p>

    <div class="tooltip-buttons">
      <button onclick="hideTooltips();">Close&nbsp;all</button>
      <button onclick="hide('isolation-tooltip');">Close</button>
    </div>
  </div>

  <div id="icu-tooltip" class="tooltip" onclick="restack(this);">
    <h3 class="icu-colour">Intensive Care Unit</h3>
    <p>
      Intensive care is where people go if they are exceedingly sick.
      Some people who reach this state do not recover and die.
      Everyone who does not die eventually recovers, we do not model long covid.
    </p>
    <p>
      This model assumes that protective equipment in hospitals is effective, there is no transmission in hospitals.
    </p>

    <div class="tooltip-buttons">
      <button onclick="hideTooltips();">Close&nbsp;all</button>
      <button onclick="hide('icu-tooltip');">Close</button>
    </div>
  </div>

  <div id="ward-tooltip" class="tooltip" onclick="restack(this);">
    <h3 class="ward-colour">Ward</h3>
    <p>
      The ward is where people go if they are sufficiently sick.
      Everyone either recovers or goes to the intensive care unit (if there is room), we do not model long covid.
    </p>
    <p>
      This model assumes that protective equipment in hospitals is effective, there is no transmission in hospitals.
    </p>

    <div class="tooltip-buttons">
      <button onclick="hideTooltips();">Close&nbsp;all</button>
      <button onclick="hide('ward-tooltip');">Close</button>
    </div>
  </div>

  <div id="waiting-tooltip" class="tooltip" onclick="restack(this);">
    <h3 class="hallway-colour">Waiting Room</h3>
    <p>
      Waiting rooms are where people go if they should be in a ward or in the intensive care unit but there is no space.
    </p>
    <p>
      This model assumes that protective equipment in hospitals is effective, there is no transmission in hospitals.
    </p>
    <p>
      Having people in the waiting room is very costly politically.
    </p>

    <div class="tooltip-buttons">
      <button onclick="hideTooltips();">Close&nbsp;all</button>
      <button onclick="hide('waiting-tooltip');">Close</button>
    </div>
  </div>

  <div id="cemetary-tooltip" class="tooltip" onclick="restack(this);">
    <h3 class="cemetary-colour">Cemetary</h3>
    <p>
      Only dead people go to the cemetary.  There is no infection transmission.
    </p>

    <div class="tooltip-buttons">
      <button onclick="hideTooltips();">Close&nbsp;all</button>
      <button onclick="hide('cemetary-tooltip');">Close</button>
    </div>
  </div>

  <div id="road-tooltip" class="tooltip" onclick="restack(this);">
    <h3 class="light-text road-colour">Road</h3>
    <p>
      Roads are how people travel from room to room.  There is no infection transmission on the roads.
    </p>

    <div class="tooltip-buttons">
      <button onclick="hideTooltips();">Close&nbsp;all</button>
      <button onclick="hide('road-tooltip');">Close</button>
    </div>
  </div>

  <div id="debug">
    <div id="debug-contents"></div>
    <button onclick="hide('debug');">Close</button>
  </div>

  <script src="../js/booleanButton.js"></script>
  <script src="../js/constants.js"></script>
  <script src="../js/controls.js"></script>
  <script src="../js/tooltips.js"></script>
  <script src="../js/record.js"></script>
  <script src="../js/manager.js"></script>
  <script src="../js/trace.js"></script>
  <script src="../js/state.js"></script>
  <script src="../js/infectState.js"></script>
  <script src="../js/townState.js"></script>
  <script src="../js/gameState.js"></script>
  <script src="../js/lib.js"></script>
  <script src="../js/shift.js"></script>
  <script src="../js/group.js"></script>
  <script src="../js/person.js"></script>
  <script src="../js/infectablePerson.js"></script>
  <script src="../js/rules.js"></script>
  <script src="../js/event.js"></script>
  <script src="../js/room.js"></script>
  <script src="../js/plan.js"></script>
  <script src="../js/gameCharts.js"></script>
  <script src="../package/chart.js/dist/chart.js"></script>
  <script src="infectConfig.js"></script>
  <script src="infect.js"></script>

</body>
</html>
